@import url("https://aoko2477.github.io/ccfolia-css/status/fixed-status.css");

/* ===== 必要最小限の変数（レイアウト＋見た目） ===== */
:root {
  /* レイアウト */
  --status-columns: 1;   /* デフォルト1列 */
  --status-width: 80px;  /* デフォルト幅 */

  /* ステータスの行列の隙間を独立で制御 */
  --status-gap-x: 6px;   /* 横のすき間（column-gap） */
  --status-gap-y: 0px;   /* 縦のすき間（row-gap） */

  /* 互換用（未設定時のフォールバック※旧仕様維持の場合、x,yにunsetを使用してください） */
  --status-gap: 2px;

  /* ゲージ/色 */
  --gauge-height: 3px;
  --gauge-radius: 2px;
  --gauge-color: #6a6a6a;                 /* モノトーン */
  --gauge-track: rgba(255,255,255,0.18);  /* 暗背景でも見える */
  --gauge-border: rgba(255,255,255,0.28); /* トラックの輪郭 */
  --label-color: #f5f5f5;                 /* ラベル色（暗背景想定） */
}

/* ===== ステータスの並び（整数列×固定幅） ===== */
[variant="bar"] {
  display: grid !important;
  grid-template-columns: repeat(var(--status-columns), var(--status-width));

  /* gap: <row-gap> <column-gap> の順 */
  gap:
    var(--status-gap-y, var(--status-gap, 0px))
    var(--status-gap-x, var(--status-gap, 0px));
}

[variant="bar"] > div {
  width: var(--status-width);
  display: flex;
  flex-direction: column;
  padding: 14px 0 4px;
}

/* ===== ラベル（HP/MP/SAN/CT） ===== */
[variant="bar"] p.MuiTypography-root {
  color: var(--label-color);
  font-weight: 600;
  letter-spacing: 0.02em;
  margin: 0;
  line-height: 1.05;
  text-shadow:
    0 1px 2px rgba(0,0,0,0.7),
    0 0 3px rgba(0,0,0,0.4);
}
/* ラベル直下の間隔（バーと被らない微スペース） */
[variant="bar"] > div > div:first-child { margin-bottom: 2px; }

/* ===== 極細3pxゲージ：下寄せ・重ね描画 ===== */
[variant="bar"] > div > div:last-child {
  position: relative;
  margin-top: auto;                   /* 下寄せ */
  height: var(--gauge-height) !important;
  border-radius: var(--gauge-radius);
  overflow: hidden;
}
[variant="bar"] > div > div:last-child > div:first-child {
  position: absolute; inset: 0;
  background: var(--gauge-track) !important;
  border-radius: inherit;
  outline: 1px solid var(--gauge-border);
}
[variant="bar"] > div > div:last-child > div:last-child {
  position: absolute; inset: 0 auto 0 0;
  height: 100%;
  border-radius: inherit;
  background: var(--gauge-color) !important;  /* フォールバック単色 */
  min-width: 1px;
}
@supports (background: color-mix(in oklab, white, black)) {
  [variant="bar"] > div > div:last-child > div:last-child {
    background:
      linear-gradient(to bottom,
        color-mix(in oklab, var(--gauge-color) 96%, white 4%),
        color-mix(in oklab, var(--gauge-color) 100%, black 10%)
      ) !important;
  }
}
@media (prefers-reduced-motion: no-preference) {
  [variant="bar"] > div > div:last-child > div:last-child { transition: width .2s ease; }
}

/* ===== イニシアチブ（バッジ）左上＆控えめ ===== */
.MuiBadge-root > .MuiAvatar-root + .MuiBadge-badge {
  right: auto !important;
  left: 0 !important;
  top: 0 !important;
  transform: translate(-30%, -30%) !important;
  background-color: rgba(0,0,0,0.5) !important; /* 半透明ダーク */
  color: #fff !important;
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 10px;
  font-weight: 600;
  box-shadow: 0 2px 4px rgba(0,0,0,0.5);
}

/* =========================================
   予備：現在未使用の変数（必要なら解除）
========================================= */
/*
:root {
  --status-number: 100px;               // 旧：横並び数を幅でごまかす用
  --font-color-status: rgb(66,66,66);   // 旧：HP等フォント色
  --font-size-status: 0.875rem;         // 旧：HP等フォントサイズ
  --font-family-all: "Roboto","Helvetica","Arial",sans-serif; // 旧：全体フォント
  --status-background-color: transparent; // 旧：ステ背景色
  --status-gauge-color: rgb(245,245,245);  // 旧：ゲージ色
  --initiative-font-color: rgb(66,66,66);  // 旧：バッジ文字色
  --initiative-background-color: rgb(245,245,245); // 旧：バッジ背景
  --character-background-color: transparent; // 旧：アイコン背景
}
*/
